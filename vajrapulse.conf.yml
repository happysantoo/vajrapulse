# VajraPulse Configuration File
#
# This file configures the VajraPulse load testing framework.
# All settings can be overridden via environment variables using the VAJRAPULSE_ prefix.
#
# Example environment variable overrides:
#   VAJRAPULSE_EXECUTION_DRAIN_TIMEOUT=10s
#   VAJRAPULSE_EXECUTION_DEFAULT_THREAD_POOL=PLATFORM
#   VAJRAPULSE_OBSERVABILITY_TRACING_ENABLED=true

execution:
  # Timeout to wait for running tasks to complete during graceful shutdown
  # Supports: ms, s, m, h (e.g., 500ms, 30s, 2m, 1h)
  # Default: 5s
  drainTimeout: 5s
  
  # Maximum time to wait before forcefully terminating tasks
  # Must be >= drainTimeout
  # Default: 10s
  forceTimeout: 10s
  
  # Default thread pool strategy when task has no @VirtualThreads or @PlatformThreads annotation
  # Options: VIRTUAL, PLATFORM, AUTO
  # - VIRTUAL: Uses virtual threads (recommended for I/O-bound tasks)
  # - PLATFORM: Uses platform thread pool (for CPU-bound tasks)
  # - AUTO: Automatically selects (defaults to VIRTUAL)
  # Default: VIRTUAL
  defaultThreadPool: VIRTUAL
  
  # Platform thread pool size when using PLATFORM strategy
  # -1 means use Runtime.getRuntime().availableProcessors()
  # Default: -1
  platformThreadPoolSize: -1

observability:
  # Enable distributed tracing (OpenTelemetry)
  # Default: false
  tracingEnabled: false
  
  # Enable metrics collection (Micrometer)
  # Default: true
  metricsEnabled: true
  
  # Enable structured logging (JSON format)
  # Default: false
  structuredLogging: false
  
  # OpenTelemetry Protocol (OTLP) endpoint for traces
  # Default: http://localhost:4317
  otlpEndpoint: http://localhost:4317
  
  # Tracing sample rate (0.0 to 1.0)
  # 1.0 = trace all requests, 0.1 = trace 10%
  # Default: 0.1
  tracingSampleRate: 0.1

# Load Pattern Configuration (optional)
# These settings can be used by CLI or programmatic usage
# CLI arguments override these values
loadPattern:
  # Pattern type: static, ramp, ramp-sustain, step, sine, spike, adaptive
  # Default: static
  type: static
  
  # Adaptive pattern configuration (used when type: adaptive)
  adaptive:
    # Initial TPS to start with
    # Default: 100
    initialTps: 100
    
    # TPS increment per adjustment interval during ramp-up
    # Default: 50
    rampIncrement: 50
    
    # TPS decrement per adjustment interval during ramp-down
    # Default: 100
    rampDecrement: 100
    
    # Time between TPS adjustments
    # Supports: ms, s, m, h (e.g., 500ms, 30s, 1m, 1h)
    # Default: 1m
    rampInterval: 1m
    
    # Maximum TPS limit (use "unlimited" for no limit)
    # Default: 5000
    maxTps: 5000
    
    # Duration to sustain at stable point before continuing indefinitely
    # Supports: ms, s, m, h (e.g., 500ms, 30s, 10m, 1h)
    # Default: 10m
    sustainDuration: 10m
    
    # Error rate threshold (0.0 to 1.0, e.g., 0.01 = 1%)
    # When error rate exceeds this, pattern ramps down
    # Default: 0.01
    errorThreshold: 0.01
